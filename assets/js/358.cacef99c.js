(window.webpackJsonp=window.webpackJsonp||[]).push([[358],{1672:function(e,t,o){"use strict";o.r(t);var a=o(21),n=Object(a.a)({},(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[o("h1",{attrs:{id:"modules-facebook"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#modules-facebook"}},[e._v("#")]),e._v(" Modules.Facebook")]),e._v(" "),o("TypeHeader"),e._v(" "),o("h2",{attrs:{id:"overview"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#overview"}},[e._v("#")]),e._v(" Overview")]),e._v(" "),o("p",[e._v("The Facebook module is used for connecting your application with Facebook.\nThis module supports the following features:")]),e._v(" "),o("ul",[o("li",[o("p",[e._v("Logging in to Facebook and authorizing your application with either the\n"),o("type-link",{attrs:{type:"Modules.Facebook.LoginButton"}},[e._v("Login button")]),e._v(" or programatically.")],1)]),e._v(" "),o("li",[o("p",[e._v("Making requests through the Facebook Graph API v3 using the\n"),o("type-link",{attrs:{type:"Modules.Facebook.requestWithGraphPath"}},[e._v("requestWithGraphPath()")]),e._v(" method.")],1)])]),e._v(" "),o("h2",{attrs:{id:"getting-started"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#getting-started"}},[e._v("#")]),e._v(" Getting Started")]),e._v(" "),o("p",[e._v("To use the Facebook module, you need a Facebook application. To create a Facebook App,\ngo to the Facebook Developer App: "),o("a",{attrs:{href:"https://developers.facebook.com/apps",target:"_blank",rel:"noopener noreferrer"}},[e._v("developers.facebook.com/apps"),o("OutboundLink")],1),e._v(".")]),e._v(" "),o("ul",[o("li",[o("p",[e._v("Edit the "),o("code",[e._v("modules")]),e._v(" section of your tiapp.xml file to include this module:")]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",[o("code",[e._v('<modules>\n    \x3c!-- Add the appropriate line(s) to your modules section --\x3e\n    <module platform="android">facebook</module>\n    <module platform="iphone">facebook</module>\n</modules>\n')])])])]),e._v(" "),o("li",[o("p",[e._v("Instantiate the module with the "),o("code",[e._v("require('facebook')")]),e._v(" method, then make subsequent API calls\nwith the new Facebook object.")]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",[o("code",[e._v("var fb = require('facebook');\nfb.permissions = [FACEBOOK_APP_PERMISSIONS]; // e.g. ['email']\nfb.initialize();\nfb.authorize();\n")])])])])]),e._v(" "),o("h3",{attrs:{id:"additional-ios-setup-steps"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#additional-ios-setup-steps"}},[e._v("#")]),e._v(" Additional iOS Setup Steps")]),e._v(" "),o("p",[e._v("For the iOS platform, in the "),o("code",[e._v("ios plist dict")]),e._v(" section of your "),o("code",[e._v("tiapp.xml")]),e._v(" file, add the following keys:")]),e._v(" "),o("ul",[o("li",[o("code",[e._v("FacebookAppID")]),e._v(" key with your Facebook App ID as the string value")]),e._v(" "),o("li",[o("code",[e._v("FacebookDisplayName")]),e._v(" key with your Facebook App name (the one from "),o("code",[e._v("developer.facebook.com")]),e._v(") as the string value")]),e._v(" "),o("li",[o("code",[e._v("CFBundleURLTypes")]),e._v(" key with a single-element array containing a dict as the value, where the dict contains:\n"),o("ul",[o("li",[o("code",[e._v("CFBundleURLName")]),e._v(" key with the application app ID (same value as the "),o("code",[e._v("id")]),e._v(" in the "),o("code",[e._v("tiapp.xml")]),e._v(" file) as the string value")]),e._v(" "),o("li",[o("code",[e._v("CFBundleURLSchemes")]),e._v(" key with a single-element array containing the Facebook App ID prefixed with "),o("code",[e._v("fb")]),e._v(" as a string value")])])])]),e._v(" "),o("p",[e._v("For example:")]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",[o("code",[e._v("    <ti:app>\n        <ios>\n            <plist>\n                <dict>\n                    <key>CFBundleURLTypes</key>\n                    <array>\n                        <dict>\n                            <key>CFBundleURLName</key>\n                            \x3c!-- Application ID same as the id value in the tiapp.xml file --\x3e\n                            <string>APP_ID</string>\n                            <key>CFBundleURLSchemes</key>\n                            <array>\n                                \x3c!-- Prefix the Facebook App ID with 'fb' --\x3e\n                                <string>fbFACEBOOK_APP_ID</string>\n                            </array>\n                        </dict>\n                    </array>\n                    <key>FacebookAppID</key>\n                    \x3c!-- Facebook App ID --\x3e\n                    <string>FACEBOOK_APP_ID</string>\n                    <key>FacebookDisplayName</key>\n                    \x3c!-- Facebook App Name from developer.facebook.com --\x3e\n                    <string>FACEBOOK_APP_NAME</string>\n                </dict>\n            </plist>\n        </ios>\n    </ti:app>\n")])])]),o("p",[e._v("To enable the use of Facebook dialogs (e.g., Login, Share), you also need to include the following key and values in "),o("code",[e._v("tiapp.xml")]),e._v("\nto handle the switching in and out of your app:")]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",[o("code",[e._v("<key>LSApplicationQueriesSchemes</key>\n<array>\n    <string>fbapi</string>\n    <string>fb-messenger-api</string>\n    <string>fbauth2</string>\n    <string>fbshareextension</string>\n</array>\n")])])]),o("p",[e._v("If you are using the older Ti.Facebook Module 4.0.5 and wish to support iOS9, you will instead need to include the following key\nand values in "),o("code",[e._v("tiapp.xml")]),e._v(" to handle the switching in and out of your app:")]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",[o("code",[e._v("<key>LSApplicationQueriesSchemes</key>\n<array>\n    <string>fbapi</string>\n    <string>fbapi20130214</string>\n    <string>fbapi20130410</string>\n    <string>fbapi20130702</string>\n    <string>fbapi20131010</string>\n    <string>fbapi20131219</string>\n    <string>fbapi20140410</string>\n    <string>fbapi20140116</string>\n    <string>fbapi20150313</string>\n    <string>fbapi20150629</string>\n    <string>fbauth</string>\n    <string>fbauth2</string>\n    <string>fb-messenger-api20140430</string>\n</array>\n")])])]),o("p",[e._v("For iOS 9+ and Titanium 5.0.0.GA and above, App Transport Security is disabled by default.\nIf you choose to enable it, you have to set the following keys and values in "),o("code",[e._v("tiapp.xml")]),e._v(" "),o("ios",[e._v(" section for facebook module:")])],1),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",[o("code",[e._v("<key>NSAppTransportSecurity</key>\n<dict>\n    <key>NSExceptionDomains</key>\n        <dict>\n            <key>facebook.com</key>\n            <dict>\n                <key>NSIncludesSubdomains</key> \n                <true/>\n                <key>NSExceptionRequiresForwardSecrecy</key> \n                <false/>\n            </dict>\n            <key>fbcdn.net</key>\n            <dict>\n                <key>NSIncludesSubdomains</key> \n                <true/>\n                <key>NSExceptionRequiresForwardSecrecy</key>  \n                <false/>\n            </dict>\n            <key>akamaihd.net</key>\n            <dict>\n                <key>NSIncludesSubdomains</key> \n                <true/>\n                <key>NSExceptionRequiresForwardSecrecy</key> \n                <false/>\n            </dict>\n        </dict>\n</dict>\n")])])]),o("h3",{attrs:{id:"additional-android-setup-steps"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#additional-android-setup-steps"}},[e._v("#")]),e._v(" Additional Android Setup Steps")]),e._v(" "),o("p",[e._v("For the Android platform, you need to:")]),e._v(" "),o("ul",[o("li",[e._v("Add the Facebook Login activity to the Android manifest")]),e._v(" "),o("li",[e._v("Add the Facebook App ID to the Android resources "),o("code",[e._v("string.xml")]),e._v(" file")]),e._v(" "),o("li",[e._v("Create a Facebook proxy and associate it with the current active activity")])]),e._v(" "),o("p",[o("strong",[e._v("Modify the Android Manifest")])]),e._v(" "),o("p",[e._v("Add the Facebook Login activity to the "),o("code",[e._v("android manifest")]),e._v(" section of your "),o("code",[e._v("tiapp.xml")]),e._v(" file.\nYou may need to add the "),o("code",[e._v("manifest")]),e._v(" and "),o("code",[e._v("application")]),e._v(" elements.")]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",[o("code",[e._v('<ti:app>\n    <android xmlns:android="http://schemas.android.com/apk/res/android">\n        <manifest>\n            <application>\n                <activity android:name="com.facebook.FacebookActivity" \n                          android:theme="@android:style/Theme.Translucent.NoTitleBar" \n                          android:label="YourAppName" \n                          android:configChanges="keyboard|keyboardHidden|screenLayout|screenSize|orientation" />\n                <meta-data android:name="com.facebook.sdk.ApplicationId" android:value="@string/facebook_app_id"/>\n\n                <provider android:name="com.facebook.FacebookContentProvider"\n                          android:authorities="com.facebook.app.FacebookContentProvider<YOUR_APP_ID>"\n                          android:exported="true" />\n            </application>\n        </manifest>\n    </android>\n<ti:app>\n')])])]),o("p",[o("strong",[e._v("Add the Facebook App ID to Android Resources")])]),e._v(" "),o("p",[e._v("Add a string element to the "),o("code",[e._v("/platform/android/res/values/strings.xml")]),e._v(" file with the "),o("code",[e._v("name")]),e._v("\nattribute set to "),o("code",[e._v("facebook_app_id")]),e._v(" and the node text set to your Facebook App ID. Create the\nfile if it does not exist.")]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",[o("code",[e._v('<resources>\n    <string name="facebook_app_id">FACEBOOK_APP_ID</string>\n</resources>\n')])])]),o("p",[o("strong",[e._v("Generate the Key Hashes")])]),e._v(" "),o("p",[e._v("Facebook requires you to add the Key Hash of the Android app in order for you to use the module.\nSteps to get the Key Hash as follows. Alternatively, if you do not have the correct Key Hash on\nthe Android App, the App will give an error message when you login with the Key Hash of the App\nwhich you can then copy.")]),e._v(" "),o("p",[e._v("Use the following command to generate and receive the key-hashpath of your app. To do do,\nreplace "),o("sdk-version",[e._v(" with your SDK-version and run:")])],1),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",[o("code",[e._v("keytool -exportcert -alias androiddebugkey -keystore ~/Library/Application\\ Support/Titanium/mobilesdk/osx/<sdk-version>/dev_keystore | openssl sha1 -binary | openssl base64\n")])])]),o("p",[e._v('You would also require, to fill up the Google Play Package Name which is the Application ID\nand the Class Name which is the Application ID followed by the Application Name concatenated\nwith the word Activity. Example, an App called Kitchensink with Application ID of\n"com.appcelerator.kitchensink" will have the Class Name as "com.appcelerator.kitchensink.KitchensinkActivity".\nAlternatively, you can check the Class Name in "'),o("project",[e._v('/build/android/AndroidManifest.xml" which is\ngenerated when you build the project. The launcher activity is the Class Name of the Application.')])],1),e._v(" "),o("p",[e._v("For more info, please see https://developers.facebook.com/docs/android/getting-started")]),e._v(" "),o("p",[o("strong",[e._v("Create a Facebook Proxy")])]),e._v(" "),o("p",[e._v("Use the "),o("type-link",{attrs:{type:"Modules.Facebook.createActivityWorker"}},[e._v("createActivityWorker()")]),e._v(" method to create a\nFacebook proxy. Pass the method a dictionary with the "),o("code",[e._v("lifecycleContainer")]),e._v(" property set to\nthe current active instance of a standalone Window (window not contained in a tab group) or TabGroup.\nCreate the proxy before calling the "),o("code",[e._v("open()")]),e._v(" method on either the window or tab group.")],1),e._v(" "),o("p",[e._v("The Facebook module needs to hook into the lifecycle events of the current active activity\nin order to synchronize its state between various activities in the application, for example,\nto update the label of the Login button when the user logs in or out of Facebook.")]),e._v(" "),o("p",[e._v("Attach the proxy to the Window or TabGroup object, so it does not get garbage collected.")]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",[o("code",[e._v("win.fbProxy = fb.createActivityWorker({lifecycleContainer: win});\n")])])]),o("h2",{attrs:{id:"module-api-usage"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#module-api-usage"}},[e._v("#")]),e._v(" Module API Usage")]),e._v(" "),o("h3",{attrs:{id:"facebook-login-and-authorization"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#facebook-login-and-authorization"}},[e._v("#")]),e._v(" Facebook Login and Authorization")]),e._v(" "),o("p",[e._v("To use Facebook, a user must logged into Facebook and explicitly authorize the application to\nperform certain actions, such as accessing profile information or posting status messages.")]),e._v(" "),o("p",[e._v("Call "),o("type-link",{attrs:{type:"Modules.Facebook.authorize"}},[e._v("authorize")]),e._v(" to prompt the user to login and authorize\nthe application. Before calling this method, set the "),o("type-link",{attrs:{type:"Modules.Facebook.permissions"}},[e._v("Modules.Facebook.permissions")]),e._v(" property\nif additional permissions are needed.")],1),e._v(" "),o("p",[e._v("Which approach you take depends on your UI and how central Facebook is to your\napplication.")]),e._v(" "),o("h3",{attrs:{id:"manage-read-and-write-permissions"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#manage-read-and-write-permissions"}},[e._v("#")]),e._v(" Manage Read and Write Permissions")]),e._v(" "),o("p",[e._v("In order to read or write content to a user's Facebook page, you need to request permission from\nthe user.  You can either request permissions when the user authorizes your application or\nrequest permissions on the fly.")]),e._v(" "),o("p",[e._v("Before the user logs in and authorizes the application, you can request permissions for the\napplication to use by either: Setting the "),o("type-link",{attrs:{type:"Modules.Facebook.permissions"}},[e._v("Modules.Facebook.permissions")]),e._v(" property if you are using "),o("code",[e._v("authorize()")]),e._v("\nmethod to have the user login and authorize the application.")],1),e._v(" "),o("p",[e._v("For a complete list of permissions, see the "),o("a",{attrs:{href:"https://developers.facebook.com/docs/facebook-login/permissions/",target:"_blank",rel:"noopener noreferrer"}},[e._v("official Facebook Permissions Reference"),o("OutboundLink")],1)]),e._v(" "),o("p",[o("strong",[e._v("Refresh Application Permissions")])]),e._v(" "),o("p",[e._v("Since the user can selectively turn application permissions on and off from their Facebook\npage, the application may need to refresh its granted permissions.")]),e._v(" "),o("p",[e._v("To refresh the application's permissions, call the\n"),o("type-link",{attrs:{type:"Modules.Facebook.refreshPermissionsFromServer"}},[e._v("refreshPermissionsFromServer()")]),e._v(" method, then\nlisten for the "),o("type-link",{attrs:{type:"Modules.Facebook.tokenUpdated"}},[e._v("Modules.Facebook.tokenUpdated")]),e._v(" event to be notified when permissions are updated.")],1),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",[o("code",[e._v("fb.addEventListener('tokenUpdated', function (e) {\n    Ti.API.info('Updated permissions: ' + JSON.stringify(fb.permissions));\n});\nfb.refreshPermissionsFromServer();\n")])])]),o("h3",{attrs:{id:"share-dialogs"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#share-dialogs"}},[e._v("#")]),e._v(" Share Dialogs")]),e._v(" "),o("p",[e._v("The Share dialog prompts a person to publish an individual story or an Open Graph story\nto their timeline. This does not require the user to authorize your app or any extended permissions,\nso it is the easiest way to enable sharing.")]),e._v(" "),o("p",[e._v("Pass either method parameters you want to add to the post, such as a "),o("code",[e._v("link")]),e._v(" or "),o("code",[e._v("hashtag")]),e._v(", or to\nshare the user's status, do not pass any parameters to the methods. Note: The "),o("code",[e._v("link")]),e._v(" parameter is\n"),o("strong",[e._v("required")]),e._v(" by the Facebook SDK.")]),e._v(" "),o("p",[e._v("To monitor if the share request succeeded or not, listen to the "),o("type-link",{attrs:{type:"Modules.Facebook.shareCompleted"}},[e._v("Modules.Facebook.shareCompleted")]),e._v("\nevent.")],1),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",[o("code",[e._v("    fb.addEventListener('shareCompleted', function (e) {\n        if (e.success) {\n            Ti.API.info('Share request succeeded.');\n        } else {\n            Ti.API.warn('Failed to share.');\n        }\n    });\n\n    fb.presentShareDialog({\n        link: 'https://appcelerator.com/',\n        hashtag: 'codestrong'\n    });\n")])])]),o("p",[e._v("For details on the Share dialog, see the\n"),o("a",{attrs:{href:"https://developers.facebook.com/docs/sharing/reference/share-dialog",target:"_blank",rel:"noopener noreferrer"}},[e._v("official Facebook Share Dialogs documentation"),o("OutboundLink")],1),e._v(".")]),e._v(" "),o("h3",{attrs:{id:"game-requests-dialog"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#game-requests-dialog"}},[e._v("#")]),e._v(" Game Requests Dialog")]),e._v(" "),o("p",[e._v("To send a game request to a user, call the\n"),o("type-link",{attrs:{type:"Modules.Facebook.presentSendRequestDialog"}},[e._v("presentSendRequestDialog()")]),e._v(" method and pass the\nmethod a dictionary with the "),o("code",[e._v("message")]),e._v(" property set the message you want to send the invited user.\nOptional: You can set the "),o("code",[e._v("title")]),e._v(" property with a title string. You can also set the "),o("code",[e._v("data")]),e._v(" property\nwith a dictionary of custom parameters. If you want to preselect users to send invite to, you can set\nthe "),o("code",[e._v("to")]),e._v(" property with string of values that are facebook ids seperated by comma.")],1),e._v(" "),o("p",[e._v("To monitor if the request succeeded or not, listen to the "),o("type-link",{attrs:{type:"Modules.Facebook.requestDialogCompleted"}},[e._v("Modules.Facebook.requestDialogCompleted")]),e._v(" event.")],1),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",[o("code",[e._v("    fb.addEventListener('requestDialogCompleted', function (e) {\n        if (e.success) {\n            Ti.API.info('request succeeded.');\n        } else {\n            Ti.API.warn('Failed to share.');\n        }\n    });\n\n    fb.presentSendRequestDialog({\n        message: 'Go to https://appcelerator.com/',\n        title: 'Invitation to Appcelerator',\n        recipients: ['123456789', '987654321'],\n        data: {\n            badge_of_awesomeness: '1',\n            social_karma: '5'\n        }\n    });\n")])])]),o("p",[e._v("For details on rgaame equest dialogs see the\n"),o("a",{attrs:{href:"https://developers.facebook.com/docs/games/services/gamerequests",target:"_blank",rel:"noopener noreferrer"}},[e._v("official Facebook Request Dialogs documentation"),o("OutboundLink")],1),e._v(".")]),e._v(" "),o("h3",{attrs:{id:"messenger-button"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#messenger-button"}},[e._v("#")]),e._v(" Messenger Button")]),e._v(" "),o("p",[e._v("The Messenger button provides a quick mechanism for users to share content to the Facebook Messenger.\nA click on the button can share the content to multiple users.")]),e._v(" "),o("p",[e._v("To create a Messenger button, call the "),o("type-link",{attrs:{type:"Modules.Facebook.createMessengerButton"}},[e._v("createMessengerButton()")]),e._v('\nmethod and pass the "mode" and "style" properties:')],1),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",[o("code",[e._v("var messengerButton = fb.createMessengerButton({\n    mode: fb.MESSENGER_BUTTON_MODE_RECTANGULAR\n    style: fb.MESSENGER_BUTTON_STYLE_BLUE\n});\nwin.add(messengerButton);\n")])])]),o("p",[e._v("For more information, see the "),o("type-link",{attrs:{type:"Modules.Facebook.MessengerButton"}},[e._v("MessengerButton API reference")]),e._v(".")],1),e._v(" "),o("h2",{attrs:{id:"examples"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#examples"}},[e._v("#")]),e._v(" Examples")]),e._v(" "),o("h3",{attrs:{id:"authorize"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#authorize"}},[e._v("#")]),e._v(" Authorize")]),e._v(" "),o("p",[e._v("Shows official Facebook dialog for logging in the user and prompting the user to approve your\nrequested permissions.  Listen for the module's "),o("type-link",{attrs:{type:"Modules.Facebook.login"}},[e._v("login")]),e._v(" event to\ndetermine whether the request succeeded.")],1),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",[o("code",[e._v("var fb = require('facebook');\nfb.initialize();\nfb.addEventListener('login', function (e) {\n    if (e.success) {\n        alert('Logged in with User ID: ' + e.uid + ', Name: ' + JSON.parse(e.data).name);\n        label.text = 'Logged In = ' + fb.loggedIn;\n    }\n    else if (e.cancelled) {\n        // user cancelled\n        alert('cancelled');\n    }\n    else {\n        alert(e.error);\n    }\n});\nfb.authorize();\n")])])]),o("h3",{attrs:{id:"logout"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#logout"}},[e._v("#")]),e._v(" Logout")]),e._v(" "),o("p",[e._v("Logout the user and forget the authorization token.  The\n"),o("type-link",{attrs:{type:"Modules.Facebook.logout"}},[e._v("logout")]),e._v(" event is fired after the user is logged out.")],1),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",[o("code",[e._v("fb.addEventListener('logout', function (e) {\n    alert('Logged out');\n});\nfb.logout();\n")])])]),o("h3",{attrs:{id:"authorize-logout-using-the-facebook-loginbutton"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#authorize-logout-using-the-facebook-loginbutton"}},[e._v("#")]),e._v(" Authorize/Logout Using the Facebook LoginButton")]),e._v(" "),o("p",[e._v("You can use the the native Facebook "),o("type-link",{attrs:{type:"Modules.Facebook.LoginButton"}},[e._v("LoginButton")]),e._v('\nto allow the user to log in as required. The button updates its state automatically depending\non whether the user is logged in or not.  When the user is logged in, then the button\nwill show "Logout", and vice-versa.')],1),e._v(" "),o("p",[e._v("Note that you don't need to set a click listener or anything else on the button.\nTo be notified when the user logs in or out, add event listeners for the\n"),o("type-link",{attrs:{type:"Modules.Facebook.login"}},[e._v("login")]),e._v(" and "),o("type-link",{attrs:{type:"Modules.Facebook.logout"}},[e._v("logout")]),e._v(" events\nprovided by the Facebook module, as in the example below.")],1),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",[o("code",[e._v("// Don't forget to set your requested permissions, else the login button won't be effective.\nvar win = Ti.UI.createWindow({ backgroundColor: 'white' });\nvar fb = require('facebook');\n\nfb.addEventListener('login', function (e) {\n    if (e.success) {\n        alert('Logged in');\n    }\n});\nfb.addEventListener('logout', function (e) {\n    alert('Logged out');\n});\n\nif (Ti.Platform.name === 'android') {\n    win.fbProxy = fb.createActivityWorker({ lifecycleContainer: win });\n}\n\n// Add the button.  Note that it doesn't need a click event listener.\nwin.add(fb.createLoginButton({\n        readPermissions: ['read_stream','email'],\n        top: 50\n}));\n\nwin.open()\n")])])]),o("h3",{attrs:{id:"simple-graph-api-call"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#simple-graph-api-call"}},[e._v("#")]),e._v(" Simple Graph API Call")]),e._v(" "),o("p",[e._v('This example makes a call to the "me" graph path, which represents the current\nuser. The JSON results are simply displayed in an alert.  This example assumes\nthe user is already logged in. You can check this with '),o("type-link",{attrs:{type:"Modules.Facebook.loggedIn"}},[e._v("Modules.Facebook.loggedIn")]),e._v(".")],1),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",[o("code",[e._v("fb.requestWithGraphPath('me', {}, 'GET', function (e) {\n    if (e.success) {\n        alert(e.result);\n    } else if (e.error) {\n        alert(e.error);\n    } else {\n        alert('Unknown response');\n    }\n});\n")])])]),o("h3",{attrs:{id:"post-a-photo-using-the-graph-api-from-the-gallery"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#post-a-photo-using-the-graph-api-from-the-gallery"}},[e._v("#")]),e._v(" Post a Photo Using the Graph API from the Gallery.")]),e._v(" "),o("p",[e._v('This example posts a photo to the user\'s account using the Graph API.\nThis requires the "publish_actions" permission.')]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",[o("code",[e._v("var b1 = Ti.UI.createButton({\n    title: 'Upload Photo from Gallery with Graph API'\n});\n\nb1.addEventListener('click', function () {\n    Titanium.Media.openPhotoGallery({\n        success: function (event) {\n            b1.title = 'Uploading Photo...';\n            var data = { picture: event.media };\n            // If publish_actions permission is not granted, request it\n            if (fb.permissions.indexOf('publish_actions') === -1) {\n                fb.requestNewPublishPermissions(['publish_actions'], fb.AUDIENCE_FRIENDS, function (e) {\n                    if (!e.success) {\n                        Ti.API.info('Publish permission error');\n                        return;\n                    }\n                    if (e.cancelled) {\n                        Ti.API.info('Publish permission cancelled');\n                        return;\n                    }\n                    \n                    Ti.API.info('Permissions: ' + fb.permissions);\n                    fb.requestWithGraphPath('me/photos', data, 'POST', showRequestResult);\n                });\n            } else {\n                fb.requestWithGraphPath('me/photos', data, 'POST', showRequestResult);\n            }\n        },\n        error: function (e) {\n            Ti.API.error('Error opening photo gallery: ' + e.error);\n        }\n    });\n});\n")])])]),o("p",[e._v("For more information on posting photos, see:")]),e._v(" "),o("ul",[o("li",[o("a",{attrs:{href:"https://developers.facebook.com/docs/graph-api/reference/photo",target:"_blank",rel:"noopener noreferrer"}},[e._v("Photo in the Facebook Graph API Reference"),o("OutboundLink")],1)])]),e._v(" "),o("h3",{attrs:{id:"post-a-photo-using-the-graph-api-with-an-image-in-resources-directory"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#post-a-photo-using-the-graph-api-with-an-image-in-resources-directory"}},[e._v("#")]),e._v(" Post a Photo Using the Graph API with an image in resources directory")]),e._v(" "),o("p",[e._v('This example posts a photo to the user\'s account using the Graph API.\nThis requires the "publish_actions" permission.')]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",[o("code",[e._v("var b2 = Ti.UI.createButton({\n    title: 'Upload Photo from file with Graph API',\n    left: 10, \n    right: 10, \n    top: 90, \n    height: 80\n});\n\nb2.addEventListener('click', function () {\n    b2.title = 'Uploading Photo...';\n    var f = Ti.Filesystem.getFile(Ti.Filesystem.resourcesDirectory, 'images', 'flower.jpg');\n    var blob = f.read();\n    var data = {\n        picture: blob\n    };\n    // If publish_actions permission is not granted, request it\n    if (fb.permissions.indexOf('publish_actions') < 0) {\n        fb.requestNewPublishPermissions(['publish_actions'], fb.AUDIENCE_FRIENDS, function (e) {\n            if (e.success) {\n                Ti.API.info('Permissions: ' + fb.permissions);\n                fb.requestWithGraphPath('me/photos', data, 'POST', showRequestResult);\n            }\n            if (e.error) {\n                Ti.API.info('Publish permission error');\n            }\n            if (e.cancelled) {\n                Ti.API.info('Publish permission cancelled');\n            }\n        });\n    } else {\n        fb.requestWithGraphPath('me/photos', data, 'POST', showRequestResult);\n    }\n});\n")])])]),o("p",[e._v("For more information on posting photos, see:")]),e._v(" "),o("ul",[o("li",[o("a",{attrs:{href:"https://developers.facebook.com/docs/graph-api/reference/photo",target:"_blank",rel:"noopener noreferrer"}},[e._v("Photo in the Facebook Graph API Reference"),o("OutboundLink")],1)])]),e._v(" "),o("h3",{attrs:{id:"show-a-basic-share-dialog"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#show-a-basic-share-dialog"}},[e._v("#")]),e._v(" Show a basic Share Dialog")]),e._v(" "),o("p",[e._v("This example shows how to show a basic Share Dialog.")]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",[o("code",[e._v("var button = Ti.UI.createButton({\n    title: 'Share URL with Share Dialog'\n});\n\nbutton.addEventListener('click', function () {\n    fb.presentShareDialog({\n        link: 'https://appcelerator.com/',\n        hashtag: 'codestrong'\n    });\n});\n")])])]),o("p",[e._v("For more information on Facebook Dialogs, see:")]),e._v(" "),o("ul",[o("li",[o("a",{attrs:{href:"https://developers.facebook.com/docs/sharing/reference/share-dialog",target:"_blank",rel:"noopener noreferrer"}},[e._v("Facebook Share Dialog Reference"),o("OutboundLink")],1)])]),e._v(" "),o("h3",{attrs:{id:"share-content-to-the-facebook-messenger"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#share-content-to-the-facebook-messenger"}},[e._v("#")]),e._v(" Share content to the Facebook Messenger")]),e._v(" "),o("p",[e._v("This example shows how to share images, GIF's and videos to the Facebook messenger.")]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",[o("code",[e._v("var btn = Ti.UI.createButton({\n    title: 'Share media to messenger'\n});\nbtn.addEventListener('click', function (e) {\n    var media = [\n        Ti.UI.createView({ height: 30, width: 30,backgroundColor: '#ff0' }).toImage(), // Image blob\n        Ti.Filesystem.getFile(Ti.Filesystem.resourcesDirectory, 'test.gif').read(), // GIF Blob\n        Ti.Filesystem.getFile(Ti.Filesystem.resourcesDirectory, 'movie.mp4').read() // Video Blob\n    ];\n\n    var options = Ti.UI.createOptionDialog({\n        options: ['Photo', 'GIF', 'Video', 'Cancel'],\n        cancel: 3\n    });\n    options.addEventListener('click', function (e) {\n        if (e.index == 3) {\n            return;\n        }\n        FB.shareMediaToMessenger({\n            media: media[e.index],\n            metadata: 'Ti rocks!',\n            link: 'https://appcelerator.com',\n        });\n    });\n    options.show();\n});\n")])])]),o("p",[e._v("For more information on sharing media to the Facebook Messenger, see:")]),e._v(" "),o("ul",[o("li",[o("a",{attrs:{href:"https://developers.facebook.com/docs/messenger",target:"_blank",rel:"noopener noreferrer"}},[e._v("Facebook Messenger Reference"),o("OutboundLink")],1)])]),e._v(" "),o("h3",{attrs:{id:"requesting-additional-permissions"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#requesting-additional-permissions"}},[e._v("#")]),e._v(" Requesting additional permissions")]),e._v(" "),o("p",[e._v("This example shows how to use the "),o("code",[e._v("requestNewPublishPermissions")]),e._v(" method to request additional permissions\nto publish a post to the user's wall.")]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",[o("code",[e._v("fb.requestNewPublishPermissions(['publish_actions'], fb.AUDIENCE_FRIENDS, function (e) {\n    if (e.success) {\n        fb.requestWithGraphPath('me/feed', null, 'POST', showRequestResult);\n    } else {\n        Ti.API.debug('Failed authorization due to: ' + e.error);\n    }\n});\n")])])]),o("ApiDocs")],1)}),[],!1,null,null,null);t.default=n.exports}}]);