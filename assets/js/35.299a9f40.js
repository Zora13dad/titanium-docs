(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{465:function(e,o,t){"use strict";t.r(o);var n=t(4),i=Object(n.a)({},function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"modules-geofence"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#modules-geofence","aria-hidden":"true"}},[e._v("#")]),e._v(" Modules.Geofence")]),e._v(" "),t("TypeHeader"),e._v(" "),t("h2",{attrs:{id:"overview"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#overview","aria-hidden":"true"}},[e._v("#")]),e._v(" Overview")]),e._v(" "),t("p",{staticClass:"note"},[e._v("This feature requires a Pro or Enterprise subscription!")]),e._v(" "),t("p",[e._v("You use the Geofence module to define and monitor geofences in your application. A geofence is a circular\nregion defined by a point (a latitude/longitude pair) and a radius, and represented by the\n"),t("type-link",{attrs:{type:"Modules.Geofence.Region"}},[e._v("Region")]),e._v(" object. When a device moves into\nor out of a geofence being monitored, the module notifies your application of the event.")],1),e._v(" "),t("p",[e._v("Enterprise customers can also define geofences on the server using the\n"),t("a",{attrs:{href:"/cloud/latest/#!/api/GeoFences-method-create"}},[e._v("Appcelerator Cloud Services API")]),e._v(".\nAn application can query the server for any defined geofences and begin monitoring them.\nSee the RegionMonitoring example in the module ZIP download.")]),e._v(" "),t("h2",{attrs:{id:"getting-started"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#getting-started","aria-hidden":"true"}},[e._v("#")]),e._v(" Getting Started")]),e._v(" "),t("p",[e._v("Once you have "),t("a",{attrs:{href:"#!/guide/Using_a_Module"}},[e._v("installed")]),e._v(" the module, use "),t("code",[e._v("require()")]),e._v(" to access it from JavaScript:")]),e._v(" "),t("pre",[t("code",[e._v("var Geofence = require('ti.geofence');\n")])]),e._v(" "),t("h3",{attrs:{id:"location-permissions"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#location-permissions","aria-hidden":"true"}},[e._v("#")]),e._v(" Location Permissions")]),e._v(" "),t("p",[e._v("Please ensure to request proper location permissions before attempting to use geofencing feautures. See\n"),t("type-link",{attrs:{type:"Titanium.Geolocation.hasLocationPermissions"}},[e._v("Titanium.Geolocation.hasLocationPermissions("),t("type",[e._v(")")])],1),e._v(" and "),t("type-link",{attrs:{type:"Titanium.Geolocation.requestLocationPermissions"}},[e._v("Titanium.Geolocation.requestLocationPermissions("),t("type",[e._v(", "),t("callback",[e._v(")")])],1)],1),e._v("\nfor details. Example:")],1),e._v(" "),t("pre",[t("code",[e._v("if (!Ti.Geolocation.hasLocationPermissions(Ti.Geolocation.AUTHORIZATION_ALWAYS)) {\n    Ti.Geolocation.requestLocationPermissions(Ti.Geolocation.AUTHORIZATION_ALWAYS, function (e) {\n        if (!e.success) {\n            alert('Location permissions declined!');\n            return;\n        }\n        \n        alert('Location permissions ready');\n        // Initialize monitoring here\n    });\n}\n")])]),e._v(" "),t("h3",{attrs:{id:"creating-and-monitoring-geofence-regions"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#creating-and-monitoring-geofence-regions","aria-hidden":"true"}},[e._v("#")]),e._v(" Creating and monitoring geofence regions")]),e._v(" "),t("p",[e._v("You use the "),t("type-link",{attrs:{type:"Modules.Geofence.createRegion"}},[e._v("Geofence.createRegion()")]),e._v(" method to define a "),t("type-link",{attrs:{type:"Modules.Geofence.Region"}},[e._v("Region")]),e._v(" object.\nA geofence is a circular area defined by a point (latitude and longitude) and a radius (in meters).")],1),e._v(" "),t("pre",[t("code",[e._v("var newRegion = Geofence.createRegion({\n    center: {\n        latitude: 37.389601,\n        longitude: -122.050169\n    },\n    radius: 500,\n    identifier:'Appcelerator'\n});\n")])]),e._v(" "),t("p",[e._v("To start monitoring a region, call the "),t("type-link",{attrs:{type:"Modules.Geofence.startMonitoringForRegions"}},[e._v("Geofence.startMonitoringForRegions()")]),e._v(" method, passing it the\nregion or regions you want to monitor.")],1),e._v(" "),t("pre",[t("code",[e._v("Geofence.startMonitoringForRegions([region1, region2]);\n")])]),e._v(" "),t("p",[e._v("To be notified when the device moves into or out of a geofence region, create an event listener\nfor the "),t("type-link",{attrs:{type:"Modules.Geofence.enterregions"}},[e._v("enterregions")]),e._v(" or "),t("type-link",{attrs:{type:"Modules.Geofence.exitregions"}},[e._v("exitregions")]),e._v(" events, respectively.\nFor example:")],1),e._v(" "),t("pre",[t("code",[e._v("Geofence.addEventListener('enterregions', function(e) {\n    e.regions.forEach(function (region) {\n        // Display local notification\n        showNotification({\n            title: 'ENTER',\n            body: 'enter - ' + region.identifier\n        });\n    });\n});\n")])]),e._v(" "),t("p",[e._v("The event object passed to the event handler contains a "),t("code",[e._v("regions")]),e._v(" property that identifies the region(s)\nthat were entered or exited. On iOS this property contains an array of "),t("type-link",{attrs:{type:"Modules.Geofence.Region"}},[e._v("Region")]),e._v(" objects;\non Android, it contains an array of generic objects that each contain a property called\n"),t("code",[e._v("identifier")]),e._v(". The value of this property corresponds to the one assigned to the "),t("type-link",{attrs:{type:"Modules.Geofence.Region"}},[e._v("Region")]),e._v("\nwhen it was created.")],1),e._v(" "),t("h2",{attrs:{id:"testing-geofence-monitoring"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#testing-geofence-monitoring","aria-hidden":"true"}},[e._v("#")]),e._v(" Testing Geofence monitoring")]),e._v(" "),t("p",[e._v("You have a few options for testing geofence monitoring in your application. One approach\nis field testing: travel (drive, walk, etc.) between monitored regions while the application is running.\nYou can also pass mock location data to the application running on a device or Simulator.")]),e._v(" "),t("p",[e._v("Note: The timing and frequency of location events may vary from one environment to another (device, OS version, network availability).")]),e._v(" "),t("h3",{attrs:{id:"mock-locations-from-the-ios-simulator"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mock-locations-from-the-ios-simulator","aria-hidden":"true"}},[e._v("#")]),e._v(" Mock locations from the iOS Simulator")]),e._v(" "),t("p",[e._v("Once the application is running in the simulator, select "),t("strong",[e._v("Debug")]),e._v(" > "),t("strong",[e._v("Location")]),e._v(" in the Simulator and\nselect a predefined location or route that you would like to be sent to the Simulator. You can\nalso enter a custom location (latitude, longitude).")]),e._v(" "),t("h3",{attrs:{id:"mock-locations-using-xcode"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mock-locations-using-xcode","aria-hidden":"true"}},[e._v("#")]),e._v(" Mock locations using Xcode")]),e._v(" "),t("p",[e._v("This method will work on both the iOS Simulator and on device.")]),e._v(" "),t("ol",[t("li",[e._v("Launch your application once, then go to the build folder of your project and open the Xcode project found in "),t("strong",[e._v("build/iphone/")]),e._v(".")]),e._v(" "),t("li",[e._v("Run your project using Xcode.")]),e._v(" "),t("li",[e._v("Once app is running, in Xcode debug area, click the Simulate Location icon to display a list of mock locations that can be sent to your application.")]),e._v(" "),t("li",[e._v("Select one of these locations to send it to your app.\nAlternately, click on "),t("strong",[e._v("Add GPX File to Project...")]),e._v(" and select a GPX file with mock locations. A GPX file is provided in the "),t("strong",[e._v("example/MockLocationData")]),e._v(" folder in module download. The route starts at North De Anza Blvd and I-280 in Cupertino, CA and travels north on I-280.")]),e._v(" "),t("li",[e._v("After adding a GPX file, go back and click on the mock locations arrow. The GPX file should now be in the list. Select the mock location to start using it.")])]),e._v(" "),t("h3",{attrs:{id:"mock-locations-on-android"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mock-locations-on-android","aria-hidden":"true"}},[e._v("#")]),e._v(" Mock locations on Android")]),e._v(" "),t("p",[e._v("Add the following to your "),t("code",[e._v("tiapp.xml")]),e._v(".")]),e._v(" "),t("pre",[t("code",[e._v('<uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION" />\n')])]),e._v(" "),t("p",[e._v("For more information, see "),t("a",{attrs:{href:"https://developer.android.com/guide/topics/location/strategies#MockData",target:"_blank",rel:"noopener noreferrer"}},[e._v("Provide Mock Location Data"),t("OutboundLink")],1)]),e._v(" "),t("h3",{attrs:{id:"sample-applications"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sample-applications","aria-hidden":"true"}},[e._v("#")]),e._v(" Sample applications")]),e._v(" "),t("p",[e._v("The module ZIP file contains two Geofence sample applications ("),t("strong",[e._v("examples/Basic")]),e._v(" and "),t("strong",[e._v("examples/RegionMonitoring")]),e._v(")\nand a GPX file ("),t("strong",[e._v("examples/MockLocationData")]),e._v(") for mocking location data in Xcode.")]),e._v(" "),t("ApiDocs")],1)},[],!1,null,null,null);o.default=i.exports}}]);